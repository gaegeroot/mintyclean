{% extends "base.njk" %}
{% block content %}
    <main>
        <!-- Hero Section -->
        <section class="pt-8">
            <div class="container">
                <div class="row mb-5">
                    <div class="col-lg-8 mx-auto text-center">
                        <span class="subtitle text-uppercase mb-3" data-aos="fade-up" data-aos-delay="0">Join Our Team</span>
                        <h1 class="mb-4" data-aos="fade-up" data-aos-delay="100">Join the Minty Team</h1>
                        <p class="fs-5 mb-4" data-aos="fade-up" data-aos-delay="200">We're looking for part-time cleaning technicians who want
                            to grow with us! This is more than just a cleaning job – it's an opportunity to build a career with a company that
                            values quality, integrity, and personal growth.</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- What Makes This Different -->
        <section class="section features__v2">
            <div class="container">
                <div class="row">
                    <div class="col-12">
                        <div class="d-lg-flex p-5 rounded-4 content" data-aos="fade-in" data-aos-delay="0">
                            <div class="row">
                                <div class="col-lg-5 mb-4 mb-lg-0">
                                    <h2 class="mb-4">What Makes This Different</h2>
                                    <p class="mb-4">
                                        <strong>Flexible part-time hours</strong>
                                        (10-20 hours/week) that work around YOUR schedule</p>
                                    <p class="mb-4">
                                        <strong>Real growth potential</strong>
                                        – we're looking for future leaders</p>
                                    <p class="mb-4">
                                        <strong>Great pay</strong>
                                        starting at $20.50/hour plus travel time, gas stipends, and tips</p>
                                    <p>
                                        <strong>Professional environment</strong>
                                        with ongoing training and support</p>
                                </div>
                                <div class="col-lg-7">
                                    <div class="row justify-content-end">
                                        <div class="col-lg-11">
                                            <h3 class="fs-5 fw-bold mb-4">The Role</h3>
                                            <p class="mb-4">You'll provide top-quality residential cleaning throughout Tucson, traveling to different client
                                                locations (up to 30-45 minute drive times). This position requires reliable transportation and the ability to work
                                                independently.</p>
                                            <h3 class="fs-5 fw-bold mb-3">We're looking for someone who is:</h3>
                                            <ul class="d-flex flex-row flex-wrap list-unstyled gap-3 features">
                                                <li class="d-flex align-items-center gap-2">
                                                    <span class="icon rounded-circle text-center">
                                                        <i class="bi bi-check"></i>
                                                    </span>
                                                    <span class="text">Reliable and detail-oriented</span>
                                                </li>
                                                <li class="d-flex align-items-center gap-2">
                                                    <span class="icon rounded-circle text-center">
                                                        <i class="bi bi-check"></i>
                                                    </span>
                                                    <span class="text">Ready to learn and grow</span>
                                                </li>
                                                <li class="d-flex align-items-center gap-2">
                                                    <span class="icon rounded-circle text-center">
                                                        <i class="bi bi-check"></i>
                                                    </span>
                                                    <span class="text">Positive and adaptable</span>
                                                </li>
                                                <li class="d-flex align-items-center gap-2">
                                                    <span class="icon rounded-circle text-center">
                                                        <i class="bi bi-check"></i>
                                                    </span>
                                                    <span class="text">Looking for more than just a paycheck</span>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Next Steps -->
        <section class="section">
            <div class="container">
                <div class="row mb-4">
                    <div class="col-lg-8 mx-auto text-center">
                        <h2 class="mb-3" data-aos="fade-up" data-aos-delay="0">Next Steps</h2>
                        <p data-aos="fade-up" data-aos-delay="100">After you submit your application, qualified candidates will be invited to a first round interview/information session where you'll learn more about Minty, meet our team, and have your questions answered. If there's a good fit, we'll invite you to a second interview before making a final decision.</p>
                    </div>
                </div>
            </div>
        </section>
        <!-- Application Form -->
        <section class="section contact__v2">
            <div class="container">
                <div class="row mb-5">
                    <div class="col-lg-8 mx-auto text-center">
                        <h2 class="mb-3" data-aos="fade-up" data-aos-delay="0">Ready to Apply?</h2>
                        <p data-aos="fade-up" data-aos-delay="100">Fill out the form below and we'll be in touch within 24 hours.</p>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-8 mx-auto">
                        <div class="form-wrapper" data-aos="fade-up" data-aos-delay="0">
                            <form
                                id="applicationForm">
                                <!-- Personal Information -->
                                <h3 class="fs-5 mb-4">Personal Information</h3>
                                <div class="row g-3 mb-4">
                                    <div class="col-md-6">
                                        <label class="mb-2" for="firstName">First Name *</label>
                                        <input class="form-control" id="firstName" name="firstName" type="text" required>
                                    </div>
                                    <div class="col-md-6">
                                        <label class="mb-2" for="lastName">Last Name *</label>
                                        <input class="form-control" id="lastName" name="lastName" type="text" required>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2" for="email">Email Address *</label>
                                        <input class="form-control" id="email" name="email" type="email" required>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2" for="phone">Phone Number *</label>
                                        <input class="form-control" id="phone" name="phone" type="tel" required>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2" for="location">Current City/Neighborhood *</label>
                                        <input class="form-control" id="location" name="location" type="text" required>
                                    </div>
                                </div>
                                <!-- Availability & Requirements -->
                                <h3 class="fs-5 mb-4 mt-5">Availability & Requirements</h3>
                                <div class="row gap-3 mb-4">
                                    <div class="col-md-12">
                                        <label class="mb-2">Do you have a reliable vehicle, a valid driver's license, and current insurance? *</label>
                                        <div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hasTransportation" id="transportYes" value="yes" required>
                                                <label class="form-check-label" for="transportYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hasTransportation" id="transportNo" value="no">
                                                <label class="form-check-label" for="transportNo">No</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2">Do you have a smartphone for scheduling and communication? *</label>
                                        <div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hasSmartphone" id="smartphoneYes" value="yes" required>
                                                <label class="form-check-label" for="smartphoneYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hasSmartphone" id="smartphoneNo" value="no">
                                                <label class="form-check-label" for="smartphoneNo">No</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2" for="hoursPerWeek">How many hours per week are you looking to work? *</label>
                                        <select class="form-select" id="hoursPerWeek" name="hoursPerWeek" required>
                                            <option value="">Select...</option>
                                            <option value="10-15">10-15 hours</option>
                                            <option value="15-20">15-20 hours</option>
                                            <option value="20+">20+ hours</option>
                                            <option value="flexible">Flexible</option>
                                        </select>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2">What days are you generally available? *</label>
                                        <div class="row">
                                            <div class="col-6 col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="availability" value="Monday" id="monday">
                                                    <label class="form-check-label" for="monday">Monday</label>
                                                </div>
                                            </div>
                                            <div class="col-6 col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="availability" value="Tuesday" id="tuesday">
                                                    <label class="form-check-label" for="tuesday">Tuesday</label>
                                                </div>
                                            </div>
                                            <div class="col-6 col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="availability" value="Wednesday" id="wednesday">
                                                    <label class="form-check-label" for="wednesday">Wednesday</label>
                                                </div>
                                            </div>
                                            <div class="col-6 col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="availability" value="Thursday" id="thursday">
                                                    <label class="form-check-label" for="thursday">Thursday</label>
                                                </div>
                                            </div>
                                            <div class="col-6 col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="availability" value="Friday" id="friday">
                                                    <label class="form-check-label" for="friday">Friday</label>
                                                </div>
                                            </div>
                                            <div class="col-6 col-md-4">
                                                <div class="form-check">
                                                    <input class="form-check-input" type="checkbox" name="availability" value="Saturday" id="saturday">
                                                    <label class="form-check-label" for="saturday">Saturday</label>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2" for="timePreferences">Preferred times (e.g., mornings, afternoons, etc.)</label>
                                        <input class="form-control" id="timePreferences" name="timePreferences" type="text">
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2" for="startDate">When could you start? *</label>
                                        <input class="form-control" id="startDate" name="startDate" type="date" required>
                                    </div>
                                </div>
                                <!-- Experience & Background -->
                                <h3 class="fs-5 mb-4 mt-5">Experience & Background</h3>
                                <div class="row gap-3 mb-4">
                                    <div class="col-md-12">
                                        <label class="mb-2">Do you have previous cleaning experience? *</label>
                                        <div class="mb-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hasCleaningExp" id="cleaningExpYes" value="yes" required>
                                                <label class="form-check-label" for="cleaningExpYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hasCleaningExp" id="cleaningExpNo" value="no">
                                                <label class="form-check-label" for="cleaningExpNo">No</label>
                                            </div>
                                        </div>
                                        <label class="mb-2" for="cleaningExpDetails">If yes, briefly describe:</label>
                                        <textarea class="form-control" id="cleaningExpDetails" name="cleaningExpDetails" rows="2"></textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2">Do you have customer service or leadership experience? *</label>
                                        <div class="mb-2">
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hasLeadershipExp" id="leadershipExpYes" value="yes" required>
                                                <label class="form-check-label" for="leadershipExpYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="hasLeadershipExp" id="leadershipExpNo" value="no">
                                                <label class="form-check-label" for="leadershipExpNo">No</label>
                                            </div>
                                        </div>
                                        <label class="mb-2" for="leadershipExpDetails">If yes, briefly describe:</label>
                                        <textarea class="form-control" id="leadershipExpDetails" name="leadershipExpDetails" rows="2"></textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2">Are you comfortable working independently at client homes? *</label>
                                        <div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="comfortableIndependent" id="independentYes" value="yes" required>
                                                <label class="form-check-label" for="independentYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="comfortableIndependent" id="independentNo" value="no">
                                                <label class="form-check-label" for="independentNo">No</label>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2">Can you pass a background check? *</label>
                                        <div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="passBackgroundCheck" id="backgroundYes" value="yes" required>
                                                <label class="form-check-label" for="backgroundYes">Yes</label>
                                            </div>
                                            <div class="form-check form-check-inline">
                                                <input class="form-check-input" type="radio" name="passBackgroundCheck" id="backgroundNo" value="no">
                                                <label class="form-check-label" for="backgroundNo">No</label>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <!-- About You -->
                                <h3 class="fs-5 mb-4 mt-5">About You</h3>
                                <div class="row gap-3 mb-4">
                                    <div class="col-md-12">
                                        <label class="mb-2" for="whyInterested">Why are you interested in working with Minty? * (2-3 sentences)</label>
                                        <textarea class="form-control" id="whyInterested" name="whyInterested" rows="3" required></textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2" for="leadershipInterest">What interests you about the growth opportunity into leadership? * (2-3
                                            sentences)</label>
                                        <textarea class="form-control" id="leadershipInterest" name="leadershipInterest" rows="3" required></textarea>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2" for="workStyle">How would you describe your work style in three words? *</label>
                                        <input class="form-control" id="workStyle" name="workStyle" type="text" required>
                                    </div>
                                </div>
                                <!-- Optional -->
                                <h3 class="fs-5 mb-4 mt-5">Optional</h3>
                                <div class="row gap-3 mb-4">
                                    <div class="col-md-12">
                                        <label class="mb-2" for="referralSource">How did you hear about us?</label>
                                        <select class="form-select" id="referralSource" name="referralSource">
                                            <option value="">Select...</option>
                                            <option value="indeed">Indeed</option>
                                            <option value="social-media">Social Media</option>
                                            <option value="friend">Friend Referral</option>
                                            <option value="website">Website</option>
                                            <option value="other">Other</option>
                                        </select>
                                    </div>
                                    <div class="col-md-12">
                                        <label class="mb-2" for="additionalInfo">Is there anything else you'd like us to know?</label>
                                        <textarea class="form-control" id="additionalInfo" name="additionalInfo" rows="3"></textarea>
                                    </div>
                                </div>
                                <div class="mt-4">
                                    <button class="btn btn-primary fw-semibold" type="submit" id="submitBtn">
                                        <span id="submitText">Submit Application</span>
                                        <span id="submitSpinner" class="spinner-border spinner-border-sm ms-2 d-none" role="status" aria-hidden="true"></span>
                                    </button>
                                </div>
                            </form>
                            <div class="mt-3 d-none alert alert-success" id="successMessage">
                                <strong>Application submitted successfully!</strong><br> Thanks for applying to join the Minty team! We review applications quickly and will reach out via email within 24 hours if your qualifications match what we're looking for.
                            </div>
                            <div class="mt-3 d-none alert alert-danger" id="errorMessage">
                                <strong>Submission failed.</strong><br>
                                <span id="errorDetails">Please check your connection and try again.</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        <!-- Footer -->
        <footer class="footer pt-5 pb-5">
            <div class="container">
                <div class="row justify-content-between mb-5 g-xl-5">
                    <div class="col-md-4 mb-5 mb-lg-0">
                        <img class="logo light img-fluid" src="/assets/images/minty_logo.png" alt="Minty Clean" width="100">
                        <p class="mb-4">Local, loud, and proud — we keep Tucson homes sparkling so you can actually enjoy living in them.</p>
                    </div>
                    <div class="col-md-7">
                        <div class="row g-2">
                            <div class="col-md-6 col-lg-4 mb-4 mb-lg-0">
                                <h3 class="mb-3">Company</h3>
                                <ul class="list-unstyled">
                                    <li>
                                        <a href="index.html#about">About</a>
                                    </li>
                                    <li>
                                         <a href="/careers">Careers
                                            <span class="badge ms-1">we're hiring</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a href="index.html#services">Services</a>
                                    </li>
                                </ul>
                            </div>
                            <div class="col-md-6 col-lg-4 mb-4 mb-lg-0 quick-contact">
                                <h3 class="mb-3">Contact</h3>
                                <p class="d-flex mb-3">
                                    <i class="bi bi-geo-alt-fill me-3"></i>
                                    <span>Tucson, AZ</span>
                                </p>
                                <a class="d-flex mb-3" href="mailto:hello@callminty.com">
                                    <i class="bi bi-envelope-fill me-3"></i>
                                    <span>hello@callminty.com</span>
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row credits pt-3">
                    <div class="col-xl-8 text-center text-xl-start mb-3 mb-xl-0">
                        &copy;
                        <script>
                            document.write(new Date().getFullYear());
                        </script>
                        Minty Clean. All rights reserved.
                    </div>
                </div>
            </div>
        </footer>
    </main>
    <script>
        // Form submission handler
        document.getElementById('applicationForm').addEventListener('submit', async function (e) {
            e.preventDefault();
            const submitBtn = document.getElementById('submitBtn');
            const submitText = document.getElementById('submitText');
            const submitSpinner = document.getElementById('submitSpinner');
            const successMessage = document.getElementById('successMessage');
            const errorMessage = document.getElementById('errorMessage');
            const errorDetails = document.getElementById('errorDetails');
            // Disable submit button and show spinner
            submitBtn.disabled = true;
            submitText.textContent = 'Submitting...';
            submitSpinner.classList.remove('d-none');
            successMessage.classList.add('d-none');
            errorMessage.classList.add('d-none');
            // Collect form data
            const formData = new FormData(this);
            // Get all checked availability days
            const availabilityDays = [];
            formData.getAll('availability').forEach(day => availabilityDays.push(day));
            // Build the data object
            const data = {
                firstName: formData.get('firstName'),
                lastName: formData.get('lastName'),
                email: formData.get('email'),
                phone: formData.get('phone'),
                location: formData.get('location'),
                hasTransportation: formData.get('hasTransportation'),
                hasSmartphone: formData.get('hasSmartphone'),
                hoursPerWeek: formData.get('hoursPerWeek'),
                availabilityDays: availabilityDays.join(', '),
                timePreferences: formData.get('timePreferences'),
                startDate: formData.get('startDate'),
                hasCleaningExp: formData.get('hasCleaningExp'),
                cleaningExpDetails: formData.get('cleaningExpDetails'),
                hasLeadershipExp: formData.get('hasLeadershipExp'),
                leadershipExpDetails: formData.get('leadershipExpDetails'),
                comfortableIndependent: formData.get('comfortableIndependent'),
                passBackgroundCheck: formData.get('passBackgroundCheck'),
                whyInterested: formData.get('whyInterested'),
                leadershipInterest: formData.get('leadershipInterest'),
                workStyle: formData.get('workStyle'),
                referralSource: formData.get('referralSource'),
                additionalInfo: formData.get('additionalInfo'),
                submittedAt: new Date().toISOString()
            };
            try { // TODO: Replace with your actual n8n webhook URL
                const webhookUrl = 'https://n8n.supergoodsystems.com/webhook/ad3169b5-7ab0-431c-9713-f39b439d6f99';
                const response = await fetch(webhookUrl, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify(data)
                });
                if (response.ok) { // Success
                    successMessage.classList.remove('d-none');
                    this.reset();
                    // Scroll to success message
                    successMessage.scrollIntoView({behavior: 'smooth', block: 'center'});
                } else {
                    throw new Error('Server responded with ' + response.status);
                }
            } catch (error) { // Error
                console.error('Submission error:', error);
                errorDetails.textContent = 'Please check your connection and try again. If the problem persists, email us at hello@callminty.com';
                errorMessage.classList.remove('d-none');
                // Scroll to error message
                errorMessage.scrollIntoView({behavior: 'smooth', block: 'center'});
            } finally { // Re-enable submit button
                submitBtn.disabled = false;
                submitText.textContent = 'Submit Application';
                submitSpinner.classList.add('d-none');
            }
        });
        // Initialize AOS
        if (typeof AOS !== 'undefined') {
            AOS.init({duration: 800, easing: 'ease-in-out', once: true, mirror: false});
        }
    </script>
{% endblock %}